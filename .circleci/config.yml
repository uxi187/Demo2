version: 2.1
jobs:
  run_cypress:
    working_directory: ~/project
    docker:
     - image: cypress/browsers:chrome69
    parallelism: 1
    steps:
     - run:
        name: Avoid hosts unknown for github
        command: mkdir ~/.ssh/ && echo -e "Host github.com\n\tStrictHostKeyChecking no\n" > ~/.ssh/config
     - run:
        name: Clone GitHub repository
        command: git clone https://github.com/uxi187/Demo2.git
     - run:
        name: Ls
        command: dir
     - run:
        name: Directory under demo
        command: cd client-frontend-tests && dir
     - run:
        name: Install dependencies 
        command: npm ci
        working_directory: '~/project/client-frontend-tests'
     - run:
        name: Verify Cypress
        command: npx cypress verify
        working_directory: '~/project/client-frontend-tests'
     - run:
        command: npm run spec_test:nav
        working_directory: '~/project/client-frontend-tests'
workflows:
  build:
    jobs:
      - run_cypress
     